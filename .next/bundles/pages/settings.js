module.exports=__NEXT_REGISTER_PAGE("/settings",function(){return{page:webpackJsonp([10],{25:function(e,t,n){"use strict";var r=n(4),a=(n.n(r),r.allowedExts.images),o=r.allowedExts.other,i=Math.floor(r.maxFileSize/1e6)+"MB",l=function(e){return{error:e}};t.a=function(e){var t=e.file,n=e.customExtension,c=e.imageOnly,u=e.previewCb,s=t.name;if(t.size>r.maxFileSize)return l("File exceeds max file size of ".concat(i));if(s.indexOf(".")<0)return l("File name does not contain a file extension (e.g. .jpg, .png)");var f=s.split(".").pop().toLowerCase();if(n)return l(f===n?null:"File type is invalid. Expected .".concat(n));var p=a.indexOf(f)>-1;if(!p&&c||!p&&o.indexOf(f)<0)return function(e){var t=e?a:a.concat(o);return l("File type is invalid. Allowed types are ".concat(t.join(", "),"."))}(c);if(p&&"function"==typeof u){var b=new FileReader;b.onload=function(e){u(e.target.result)},b.readAsDataURL(t)}return{error:null}}},42:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(10),i=(n.n(o),n(2)),l=(n.n(i),n(25)),c=n(1),u=n(3),s=n(15);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={padding:10,width:"100%",minHeight:80,overflow:"hidden",position:"relative",maxWidth:u.sizes.maxBlockWidth,border:"1px dotted ".concat(u.colors.blackFg),"& .select":h({},u.flexColCenter,{textAlign:"center",justifyContent:"center","& input":{display:"none"},"& button":{margin:10}}),"& .eatAnim":{width:60,height:60,position:"absolute",transform:"rotate(-30deg)",animation:"".concat(Object(s.b)(60)," 2.5s ease-in-out infinite"),"& .half":{width:60,height:30,overflow:"hidden",textAlign:"center","& div":{width:60,height:60,borderRadius:60,background:u.colors.yellow},":nth-child(1)":{position:"relative",animation:"".concat(s.c," 600ms ease-in-out infinite"),"& i":{top:10,left:24,width:8,height:8,borderRadius:8,background:"black",position:"absolute"}},":nth-child(2)":{animation:"".concat(s.a," 600ms ease-in-out infinite")}}}},g=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=(t.__proto__||Object.getPrototypeOf(t)).call(this),e=!r||"object"!==f(r)&&"function"!=typeof r?m(n):r,Object.defineProperty(m(e),"doFileCheck",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=e.props,r=n.checkFileParams,a=n.onFileChange;if(t){var o=Object(l.a)(h({},r,{file:t}));if(o.error)return Object(c._88)({title:"Error...",message:o.error,button1Txt:"OK",button2Txt:null})}"function"==typeof a&&a(t)}}),Object.defineProperty(m(e),"handleChange",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=t.target.files,r=n.length?n[0]:null;e.doFileCheck(r)}}),Object.defineProperty(m(e),"handleDrop",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setState({fileIncoming:!1});var n=t.dataTransfer.files;n.length&&(e.doFileCheck(n[0]),t.preventDefault())}}),Object.defineProperty(m(e),"handleDragOver",{configurable:!0,enumerable:!0,writable:!0,value:function(t){t.preventDefault(),clearTimeout(e.timeout),e.setState({fileIncoming:!0})}}),Object.defineProperty(m(e),"handleDragLeave",{configurable:!0,enumerable:!0,writable:!0,value:function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.setState({fileIncoming:!1})},100)}}),Object.defineProperty(m(e),"focusInput",{configurable:!0,enumerable:!0,writable:!0,value:function(){return e.fileEl&&e.fileEl.click()}}),e.state={fileIncoming:!1},e.className=Object(i.css)(v),e}var n,o,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,(o=[{key:"render",value:function(){var e=this,t=this.state.fileIncoming,n=this.props,r=n.style,o=n.message;return o=o||"Drag and drop file or click below to select",a.a.createElement("div",p({style:r},{className:this.className,onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave}),t?a.a.createElement("div",{className:"eatAnim"},a.a.createElement("div",{className:"half"},a.a.createElement("div",null,a.a.createElement("i",null))),a.a.createElement("div",{className:"half"},a.a.createElement("div",null))):a.a.createElement("div",{className:"select"},a.a.createElement("p",null,t?"incoming!!!!":o),a.a.createElement("input",{type:"file",onChange:this.handleChange,ref:function(t){return e.fileEl=t}}),a.a.createElement("button",{onClick:this.focusInput},"Select file")))}}])&&b(n.prototype,o),u&&b(n,u),t}();t.a=g},513:function(e,t,n){e.exports=n(514)},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n.n(r),o=n(2),i=(n.n(o),n(6)),l=n(3),c=n(18),u=n(22),s=n(42),f=n(1),p=n(11);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={padding:10,"& .info":v({},l.flexRowCenter,{flexWrap:"wrap",alignItems:"flex-start","& .avatar":{width:72,height:72},"& p":{fontWeight:700,margin:"5px 0 0 10px"}}),"& .wrap":{width:"100%",display:"flex",flexWrap:"wrap",margin:"10px auto",maxWidth:l.sizes.maxBlockWidth},"& .fields":{margin:"10px auto","& div":{width:"100%",display:"flex",margin:"10px 0",flexWrap:"wrap"},"& label":{marginTop:5},"& input":{border:"none",background:"none",padding:"5px 8px",borderBottom:"1px solid ".concat(l.colors.blackFg)},"& button:nth-child(1)":{margin:"0 10px 0 auto"}}},O=["username"],w=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(a=(t.__proto__||Object.getPrototypeOf(t)).call(this,e))||"object"!==b(a)&&"function"!=typeof a?d(r):a,j.call(d(n));var o=e.users,i=o[o.curUser].username;return n.state={file:null,changes:{},error:null,previewData:null,username:i||""},n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,(i=[{key:"render",value:function(){var e=this.state,t=e.changes,n=e.error,r=e.previewData,i=this.props.users,l=i.curUser,f=i.avatarProgress,p=i.avatarError,b=i[l]||{},h=b.restricts,d=b.avatar,v=b.firstName,g=b.lastName,O=b.username;return h&&h.updating_profile?a.a.createElement(c.a,{restrict:!0},a.a.createElement("p",{className:"errMsg"},"Updating profile is currently disabled for your account")):a.a.createElement(c.a,{className:Object(o.css)(y),restrict:!0},a.a.createElement("div",{className:"info"},a.a.createElement(u.a,m({avatar:d},{src:r,className:"avatar"})),a.a.createElement("p",null,"".concat(v," ").concat(g," - @").concat(O))),a.a.createElement(s.a,{onFileChange:this.handleFile,style:{margin:"25px auto 0"},checkFileParams:{imageOnly:!0,previewCb:this.previewAvatar},message:"Drag and drop picture or click below to select avatar"}),d&&a.a.createElement("div",{className:"wrap"},a.a.createElement("button",{onClick:this.removeAvatar,style:{marginLeft:"auto"}},"Remove avatar")),a.a.createElement("div",{className:"wrap fields"},a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"username"},"New username: "),a.a.createElement("input",{type:"text",id:"username",maxLength:"16",placeholder:"New username",value:this.state.username,onChange:this.handleField})),Object.keys(t).length>0&&a.a.createElement("div",null,a.a.createElement("button",{className:"btn-alt",onClick:this.reset},"Reset"),a.a.createElement("button",{onClick:f?null:this.submit},f?f+"%":"Submit")),a.a.createElement("div",null,(p||n)&&a.a.createElement("p",null,p||n))))}}])&&h(n.prototype,i),l&&h(n,l),t}(),j=function(){var e=this;Object.defineProperty(this,"handleFile",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=e.state.changes,r={};t?n.avatar=!0:(delete n.avatar,r.previewData=null),e.setState(v({},r,{changes:n,file:t}))}}),Object.defineProperty(this,"previewAvatar",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setState({previewData:t})}}),Object.defineProperty(this,"removeAvatar",{configurable:!0,enumerable:!0,writable:!0,value:function(){Object(f._88)({message:"Are you sure you want to delete your avatar?",button1Act:function(){return Object(f._73)().catch(function(e){Object(f._88)({title:"Error...",message:Object(p.a)(e,"An error occurred removing avatar"),button1Txt:"OK",button2Txt:null})})}})}}),Object.defineProperty(this,"handleField",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n,r=e.state.changes,a=e.props.users,o=a[a.curUser],i=t.target.id,l=t.target.value.trim();o[i]!==l&&l.length?r[i]=!0:delete r[i],e.setState((g(n={},i,l),g(n,"changes",r),n))}}),Object.defineProperty(this,"reset",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t={changes:{},previewData:null,file:null},n=e.props.users,r=n[n.curUser];O.forEach(function(e){return t[e]=r[e]}),e.setState(t)}}),Object.defineProperty(this,"submit",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.props.users,n=e.state,r=n.changes,a=n.file;r=v({},r);var o=Boolean(r.avatar);delete r.avatar;var i={},l=Object.keys(r);(l.length||o)&&(l.forEach(function(t){return i[t]=e.state[t]}),l.length?Object(f._97)(v({_id:t.curUser},i)).then(function(){return o&&Object(f._31)(a)}).then(function(){return e.reset()}).catch(function(e){Object(f._88)({title:"Error...",message:Object(p.a)(e,"An error occurred updating settings"),button1Txt:"OK",button2Txt:null})}):Object(f._31)(a).then(function(){return e.reset()}))}})};t.default=Object(i.b)(function(e){return{users:e.users}})(w)}},[513]).default}});