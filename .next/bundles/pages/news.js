module.exports=__NEXT_REGISTER_PAGE("/news",function(){return{page:webpackJsonp([4],{177:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=(n.n(a),n(6)),l=n(3),c=n(4),u=(n.n(c),n(16)),s=n.n(u),d=n(59);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){f(e,t,n[t])})}return e}({padding:10,width:"100%"},l.flexRowCenter,{alignItems:"flex-start","& img":{width:96,maxHeight:96,margin:"0 10px 0 0"},"& p":{wordBreak:"break-word",maxWidth:l.sizes.maxBlockWidth,"& span":{fontWeight:700}},"& a":{textDecoration:"none"}});t.a=Object(i.b)(function(e){return{pages:e.pages}})(function(e){var t=e.canEdit,n=e.pages,r=n.curPage,i=n[r]||{},l=i.desc,u=i.name,f=i.thumb,m=r===c.newsPageId?"/news?edit":"/page?id="+r+"&edit";return f?o.a.createElement("div",{className:Object(a.css)(p)},o.a.createElement(d.a,{_id:r,thumb:f}),o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("span",null,u),t&&o.a.createElement(s.a,{href:m,passHref:!0},o.a.createElement("a",{id:"edit"}," - Edit"))),o.a.createElement("p",null,l))):null})},25:function(e,t,n){"use strict";var r=n(4),o=(n.n(r),r.allowedExts.images),a=r.allowedExts.other,i=Math.floor(r.maxFileSize/1e6)+"MB",l=function(e){return{error:e}};t.a=function(e){var t=e.file,n=e.customExtension,c=e.imageOnly,u=e.previewCb,s=t.name;if(t.size>r.maxFileSize)return l("File exceeds max file size of ".concat(i));if(s.indexOf(".")<0)return l("File name does not contain a file extension (e.g. .jpg, .png)");var d=s.split(".").pop().toLowerCase();if(n)return l(d===n?null:"File type is invalid. Expected .".concat(n));var f=o.indexOf(d)>-1;if(!f&&c||!f&&a.indexOf(d)<0)return function(e){var t=e?o:o.concat(a);return l("File type is invalid. Allowed types are ".concat(t.join(", "),"."))}(c);if(f&&"function"==typeof u){var p=new FileReader;p.onload=function(e){u(e.target.result)},p.readAsDataURL(t)}return{error:null}}},26:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.children,n=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children"]);return o.a.createElement("a",a({target:"_blank",rel:"noopener noreferrer"},n),t)}},27:function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r=["January","February","March","April","May","June","July","August","September","October","November","December"],o=function(e){return(e=e.split("-"))[1]=e[1].replace("0",""),e=e.join("-"),new Date(e)};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e instanceof Date?e:new Date(e);var n,o="".concat(r[e.getMonth()]," ").concat(e.getDate(),", ").concat(e.getFullYear());if(!t){var a="AM",i=e.getHours(),l=e.getMinutes();i>11?(i=i>12?i-12:i,a="PM"):0===i&&(i="12"),n=l,l=1===(n+="").length?"0"+n:n,o+=" ".concat(i,":").concat(l," ").concat(a)}return o}},33:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n(6),l=n(1),c=n(13),u=n(4),s={top:0,left:0,zIndex:5,opacity:0,height:"0",width:"100%",color:"#ffffff",position:"fixed",overflow:"hidden",background:"rgba(0, 0, 0, 0.75)",transition:"opacity 175ms ease-in-out","&.active":{opacity:1,height:"100%"},"& .close":{top:15,right:25,fontSize:35,cursor:"pointer",position:"absolute"},"& img":{top:0,left:0,right:0,bottom:0,margin:"auto",maxWidth:"90%",maxHeight:"90%",position:"absolute"}},d=function(e){var t=e.posts;return o.a.createElement("div",{className:Object(a.css)(s)+(t.expanded?" active":"")},o.a.createElement("div",{id:"escape",className:"close",onClick:l._24,title:"Hide expanded view"},"X"),t.expanded?o.a.createElement("img",{src:u.uploadsUrl+t[t.expanded].file,alt:"expanded post image"}):null)},f=n(3),p=n(15),m=n(16),b=n.n(m),g=n(7),h=n(26);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w={width:"100%",textAlign:"center",margin:"10px 0","& img":{width:"auto",height:"auto",maxHeight:400,maxWidth:"98%",cursor:"pointer"},"& a":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}({fontSize:15},f.flexRowCenter,{display:"inline-flex",padding:"8px 10px",margin:"10px 5px 0",textDecoration:"none","& svg":{marginRight:5},"& span":{height:16}})},O={height:16,width:16},x=function(e){var t=e._id,n=e.file;return o.a.createElement("div",{className:Object(a.css)(w)},function(){var e="file",r=n.split(".").pop();if(u.allowedExts.images.indexOf(r)>-1)return o.a.createElement("img",{src:u.uploadsUrl+n,onClick:function(){return Object(l._42)(t)}});switch(r){case"pdf":e+="-pdf";break;case"xls":case"xlsx":e+="-excel";break;case"doc":case"docx":e+="-word";break;case"ppt":case"pptx":e+="-powerpoint"}return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(g.a,y({icon:e},{style:{height:72,width:72,color:"#555555"}}))),o.a.createElement(h.a,{href:u.uploadsUrl+n,download:!0},o.a.createElement(g.a,{icon:"download",style:O}),o.a.createElement("span",null,"Download")),o.a.createElement(h.a,{href:"https://docs.google.com/viewer?url="+u.uploadsUrl+n},o.a.createElement(g.a,{icon:"eye",style:O}),o.a.createElement("span",null,"View")))}())};function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={width:"100%",textAlign:"center",padding:"5px 0 15px",wordBreak:"break-word","& textarea":{padding:5,width:"100%",border:"none",marginBottom:10,borderBottom:"1px solid ".concat(f.colors.grey)},"& .buttons":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){j(e,t,n[t])})}return e}({width:"100%"},f.flexRowCenter,{justifyContent:"center","& button":{margin:"0 5px"}})},P=function(e){var t=e._id,n=e.commentId;return"edit"+(n?"Comment"+n:"Post"+t)},_=function(e){var t=e._id,n=e.commentId;if(n)return Object(l._27)({post:t,_id:n,editing:!1});Object(l._71)({_id:t,editing:!1})},k=function(e){var t=e._id,n=e.commentId,r=e.editing,i=e.text,c=P({_id:t,commentId:n});return o.a.createElement("div",{className:Object(a.css)(E)},r?o.a.createElement("div",null,o.a.createElement("textarea",{autoFocus:!0,id:c,defaultValue:i,maxLength:u.maxPostText}),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:function(){return function(e){var t,n,r,o=e._id,a=e.commentId;_({_id:o,commentId:a});var i=document.querySelector("#"+P({_id:o,commentId:a}));i&&(i=i.value.trim()).length&&(a?(t="comment",n=l._90,r={post:o,_id:a,text:i}):(t="post",n=l._94,r={_id:o,text:i}),n(r).catch(function(){Object(l._88)({title:"Error...",message:"An error occurred updating this ".concat(t,". Please try again later"),button1Txt:"OK",button2Txt:null})}))}({_id:t,commentId:n})}},"Submit"),o.a.createElement("button",{onClick:function(){return _({_id:t,commentId:n})},className:"btn-alt"},"Cancel"))):i)},S=n(22);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I={position:"relative","& svg":{cursor:"pointer"},"& .options":function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){T(e,t,n[t])})}return e}({top:0,right:30,height:0,width:115,zIndex:3},f.shadows.box,{borderRadius:3,overflow:"hidden",position:"absolute",background:"#ffffff",transition:"height 150ms ease-in-out","&.active":{height:"auto",minHeight:25},"& .opt":{padding:"4px 0",cursor:"pointer",userSelect:"none",textAlign:"center",borderBottom:"1px solid ".concat(f.colors.grey),":hover":{background:f.colors.grey}}})},M=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return N(r,(n=r=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Object.defineProperty(A(r),"state",{configurable:!0,enumerable:!0,writable:!0,value:{show:!1}}),Object.defineProperty(A(r),"toggleShow",{configurable:!0,enumerable:!0,writable:!0,value:function(){return r.setState({show:!r.state.show})}}),Object.defineProperty(A(r),"askAndDo",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.message,n=e.errMessage,o=e.toDo;r.toggleShow(),Object(l._88)({message:t,button1Act:function(){o().catch(function(){Object(l._88)({title:"Error...",message:n,button1Txt:"OK",button2Txt:null})})}})}}),Object.defineProperty(A(r),"report",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.props,t=e._id,n=e.commentId,o=n?"comment":"post";r.askAndDo({message:"Are you sure you want to report this ".concat(o,"?"),errMessage:"An error occurred reporting the ".concat(o),toDo:n?function(){return Object(l._90)({_id:n,reported:!0})}:function(){return Object(l._94)({_id:t,reported:!0})}})}}),Object.defineProperty(A(r),"unreport",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.props,t=e._id,n=e.commentId;r.askAndDo({message:"Are you sure you want to dismiss this reporting?",errMessage:"An error occurred dismissing the reporting",toDo:n?function(){return Object(l._90)({_id:n,reported:!1})}:function(){return Object(l._94)({_id:t,reported:!1})}})}}),Object.defineProperty(A(r),"archive",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.props,t=e._id,n=e.commentId,o=e.users,a=o[o.curUser].isAdmin?"archive":"delete",i=a.substr(0,a.length-1)+"ing",c=n?"comment":"post";r.askAndDo({message:"Are you sure you want to ".concat(a," this ").concat(c,"?"),errMessage:"An error occurred ".concat(i," this ").concat(c),toDo:n?function(){return Object(l._90)({_id:n,archived:!0})}:function(){return Object(l._94)({_id:t,archived:!0})}})}}),Object.defineProperty(A(r),"edit",{configurable:!0,enumerable:!0,writable:!0,value:function(){r.toggleShow();var e=r.props,t=e._id,n=e.commentId;if(n)return Object(l._27)({post:t,_id:n,editing:!0});Object(l._71)({_id:t,editing:!0})}}),Object.defineProperty(A(r),"delete",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.props,t=e._id,n=e.commentId,o=n?"comment":"post";r.askAndDo({message:"Are you sure you want to delete this ".concat(o,". This can not be undone."),errMessage:"An error occurred while deleting this ".concat(o),toDo:n?function(){return Object(l._75)(n)}:function(){return Object(l._82)(t)}})}}),Object.defineProperty(A(r),"shouldHide",{configurable:!0,enumerable:!0,writable:!0,value:function(e){r.mainEl&&!r.mainEl.contains(e.target)&&r.setState({show:!1})}}),n))}var n,i,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){window.addEventListener("click",this.shouldHide)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.shouldHide)}},{key:"render",value:function(){var e=this,t=this.props,n=t.reported,r=t.archived,i=t.createdBy,l=t.users,c=this.state.show,u=l[l.curUser].isAdmin,s=Boolean(i===l.curUser),d="Report",f=this.report;return n&&(f=u?this.unreport:null,d=u?"Dismiss report":"Reported"),o.a.createElement("div",{className:Object(a.css)(I)+" PostOptions",ref:function(t){return e.mainEl=t}},o.a.createElement(g.a,{icon:"ellipsis-v",style:{height:20,width:15},onClick:this.toggleShow}),o.a.createElement("div",{className:"options"+(c?" active":"")},r&&n||!r&&o.a.createElement("div",{onClick:f,className:"opt"},d),r||!s&&!u?null:o.a.createElement("div",{onClick:this.edit,className:"opt",id:c?"edit":null},"Edit"),r||!s&&!u?null:o.a.createElement("div",{className:"opt",onClick:this.archive,id:!u&&c?"delete":null},u?"Archive":"Delete"),u?o.a.createElement("div",{className:"opt",onClick:this.delete,id:u&&c?"delete":null},"Delete"):null))}}])&&D(n.prototype,i),c&&D(n,c),t}(),F=n(27),R={width:"100%",display:"flex",paddingBottom:5,position:"relative","& .text":{fontSize:15,marginLeft:5,position:"relative",wordWrap:"break-word",width:"calc(100% - 55px)","& .name":{fontWeight:700,paddingBottom:1,width:"calc(100% - 30px)","& a":{textDecoration:"none"}},"& .PostOptions":{top:0,right:0,padding:"8px 2px",position:"absolute"}}},B=function(e){var t=e._id,n=e.commentId,r=e.users,i=e.createdBy,l=e.createdAt,c=e.reported,u=e.archived,s=r[i]||{},d=s.avatar,f=s.firstName,p=s.lastName,m=s.username;return o.a.createElement("div",{className:Object(a.css)(R)},o.a.createElement(S.a,{avatar:d,style:{height:50,width:50,borderRadius:50}}),o.a.createElement("div",{className:"text"},o.a.createElement("p",{className:"name"},o.a.createElement(b.a,{href:"/user?id="+i},o.a.createElement("a",null,f," ",p," - @",m))),o.a.createElement("p",null,Object(F.a)(l)),o.a.createElement(M,{_id:t,commentId:n,reported:c,archived:u,createdBy:i,users:r})))},W={paddingTop:5,width:"98%",margin:"0 0 0 2%",position:"relative",background:"#ffffff",borderTop:"1px solid ".concat(f.colors.blackFg)},L=function(e){var t=e._id,n=e.text,r=e.users,i=e.editing,l=e.archived,c=e.reported,u=e.commentId,s=e.createdAt,d=e.createdBy;return o.a.createElement("div",{className:Object(a.css)(W)},o.a.createElement(B,{_id:t,commentId:u,users:r,createdAt:s,createdBy:d,reported:c,archived:l}),o.a.createElement(k,{_id:t,commentId:u,editing:i,text:n}))};function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){z(e,t,n[t])})}return e}({width:"100%"},f.shadows.box,{margin:"10px 0 0",borderRadius:3},f.flexRowCenter,{background:"#ffffff","& textarea":{height:24,outline:0,padding:"3px 8px",flexGrow:1,fontSize:16,lineHeight:1,border:"none",marginRight:2},"& button":{margin:3}}),H=function(e){var t=e._id;return o.a.createElement("div",{className:Object(a.css)(U)},o.a.createElement("textarea",{id:"reply"+t,maxLength:u.maxCmntText,placeholder:"Reply to the post..."}),o.a.createElement("button",{onClick:function(){return function(e){var t=document.querySelector("#reply"+e);if(t){var n=t.value.trim();n.length&&(t.value="",Object(l._32)({postId:e,text:n}).catch(function(){Object(l._88)({title:"Error...",message:"An error occurred while submitting your reply",button1Txt:"OK",button2Txt:null})}))}}(t)}},"Submit"))};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Y(e,t,n[t])})}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q={"& .loadOlders":X({marginBottom:5,padding:"2px 0",fontWeight:700},f.flexRowCenter,{cursor:"pointer",textAlign:"right",userSelect:"none"}),"& .error":{padding:"10px 0",textAlign:"center"}},Z=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return J(r,(n=r=J(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Object.defineProperty(V(r),"loadMoreComments",{configurable:!0,enumerable:!0,writable:!0,value:function(){return Object(l._47)({postId:r.props._id})}}),n))}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,(i=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t._id,r=t.commentIds,o=t.commentsError,a=t.commentsPending,i=t.moreComments;e.commentIds.length&&(r.length||a||o||!i||Object(l._47)({initial:!0,postId:n}))}},{key:"render",value:function(){var e=this.props,t=e._id,n=e.users,r=e.canReply,i=e.comments,l=e.commentIds,u=e.moreComments,s=e.commentsError,d=e.commentsPending;return o.a.createElement("div",{className:Object(a.css)(Q),style:{marginTop:u?0:10}},u?o.a.createElement("div",{className:"loadOlders",onClick:d?null:this.loadMoreComments},o.a.createElement("p",{style:{marginLeft:"auto"}},"Load older comments"),d?o.a.createElement(c.a,{size:16,style:{margin:"0 5px"}}):o.a.createElement(g.a,{icon:"chevron-up",style:{height:16,margin:"0 0 -2px 5px"}})):null,l.map(function(e,r){return o.a.createElement(L,K({},X({_id:t,users:n,commentId:e},i[e],{style:0===r?{borderColor:"transparent"}:null}),{key:e}))}),s?o.a.createElement("p",{className:"error"},s):null,r&&o.a.createElement(H,{_id:t}))}}])&&q(n.prototype,i),u&&q(n,u),t}();function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee={opacity:0,width:"100%",textAlign:"left",transform:"scale(0)",margin:"0px auto 35px",maxWidth:f.sizes.maxBlockWidth,animation:"".concat(p.f," 225ms ease forwards"),":nth-child(1)":{marginTop:0},"& .page":{minHeight:16,fontWeight:700,padding:"5px 0","& a":{textDecoration:"underline"}},"& .box":{minHeight:75,borderRadius:4,background:"#ffffff",boxShadow:"3px 3px 6px rgba(0, 0, 0, 0.25)"},"& .totalComments":{width:"100%",padding:"0px 5px 5px","& span":{fontWeight:700,cursor:"pointer"}}},te=function(e){var t=e._id,n=e.text,r=e.file,a=e.page,i=e.users,c=e.pages,s=e.style,d=e.editing,f=e.reported,p=e.archived,m=e.createdAt,g=e.createdBy,h=e.className,y=e.commentIds,v=e.totalComments,w=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["_id","text","file","page","users","pages","style","editing","reported","archived","createdAt","createdBy","className","commentIds","totalComments"]);return o.a.createElement("div",{className:h,style:s},o.a.createElement("p",{className:"page"},c.curPage!==a?o.a.createElement(b.a,{href:a===u.newsPageId?"/news":"/page?id="+a},o.a.createElement("a",null,"Posted to ",c[a].name)):c.curPage===u.homePageId&&"Posted to Home"),o.a.createElement("div",{className:"box"},o.a.createElement(B,{users:i,_id:t,createdBy:g,createdAt:m,reported:f,archived:p}),r&&o.a.createElement(x,{file:r,_id:t}),o.a.createElement(k,{_id:t,editing:d,text:n}),o.a.createElement("div",{className:"totalComments"},o.a.createElement("p",null,v," comment",1!==v?"s":"",y&&y.length>l._59&&[" - ",o.a.createElement("span",{key:"collapse",onClick:function(){return Object(l._23)(t)}},"Collapse comments")]))),o.a.createElement(Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$(e,t,n[t])})}return e}({_id:t,users:i,canReply:!p,totalComments:v,commentIds:y},w)))};function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var le={width:"100%",textAlign:"center",padding:10,paddingBottom:25,"& .moreBtn":{margin:"10px auto"}},ce=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,e=!(r=(t.__proto__||Object.getPrototypeOf(t)).call(this))||"object"!==ne(r)&&"function"!=typeof r?ie(n):r,Object.defineProperty(ie(e),"loadMorePosts",{configurable:!0,enumerable:!0,writable:!0,value:function(){return Object(l._51)({})}}),e.state={numAdded:0,numPrev:0},e.className=Object(a.css)(le),e.postClass=Object(a.css)(ee),e}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,u=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.numPrev,r=e.posts.ids.length;return r!==n?{numPrev:r,numAdded:r>n?r-n:0}:null}}],(i=[{key:"componentDidUpdate",value:function(e){var t=this.props.posts;e.posts.ids.length&&(t.ids.length||t.pending||t.error||!t.hasMore||this.loadMorePosts())}},{key:"render",value:function(){var e=this,t=this.props,n=t.page,r=t.pages,a=t.posts,i=t.users,l=this.state.numAdded,u=a.ids.length-l;return n!==r.curPage?null:o.a.createElement("div",{className:this.className},o.a.createElement(d,{posts:a}),a.ids.map(function(t,n){return l&&(n=n>u?n-u:0),o.a.createElement(te,re({},function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){oe(e,t,n[t])})}return e}({},a[t],{_id:t,pages:r,users:i,className:e.postClass,style:{animationDelay:50*n+"ms"}}),{key:t}))}),!a.ids.length&&!a.pending&&!a.error&&o.a.createElement("p",null,"There are no posts here yet"),a.error&&o.a.createElement("p",{style:{marginTop:20}},a.error),a.pending&&o.a.createElement(c.a,{style:{marginTop:20},size:a.ids.length?24:36}),a.hasMore&&!a.pending&&o.a.createElement("button",{className:"moreBtn",onClick:this.loadMorePosts},"Load more"))}}])&&ae(n.prototype,i),u&&ae(n,u),t}();t.a=Object(i.b)(function(e){return{pages:e.pages,posts:e.posts,users:e.users}})(ce)},42:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(10),i=(n.n(a),n(2)),l=(n.n(i),n(25)),c=n(1),u=n(3),s=n(15);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h={padding:10,width:"100%",minHeight:80,overflow:"hidden",position:"relative",maxWidth:u.sizes.maxBlockWidth,border:"1px dotted ".concat(u.colors.blackFg),"& .select":b({},u.flexColCenter,{textAlign:"center",justifyContent:"center","& input":{display:"none"},"& button":{margin:10}}),"& .eatAnim":{width:60,height:60,position:"absolute",transform:"rotate(-30deg)",animation:"".concat(Object(s.b)(60)," 2.5s ease-in-out infinite"),"& .half":{width:60,height:30,overflow:"hidden",textAlign:"center","& div":{width:60,height:60,borderRadius:60,background:u.colors.yellow},":nth-child(1)":{position:"relative",animation:"".concat(s.c," 600ms ease-in-out infinite"),"& i":{top:10,left:24,width:8,height:8,borderRadius:8,background:"black",position:"absolute"}},":nth-child(2)":{animation:"".concat(s.a," 600ms ease-in-out infinite")}}}},y=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=(t.__proto__||Object.getPrototypeOf(t)).call(this),e=!r||"object"!==d(r)&&"function"!=typeof r?m(n):r,Object.defineProperty(m(e),"doFileCheck",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=e.props,r=n.checkFileParams,o=n.onFileChange;if(t){var a=Object(l.a)(b({},r,{file:t}));if(a.error)return Object(c._88)({title:"Error...",message:a.error,button1Txt:"OK",button2Txt:null})}"function"==typeof o&&o(t)}}),Object.defineProperty(m(e),"handleChange",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=t.target.files,r=n.length?n[0]:null;e.doFileCheck(r)}}),Object.defineProperty(m(e),"handleDrop",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setState({fileIncoming:!1});var n=t.dataTransfer.files;n.length&&(e.doFileCheck(n[0]),t.preventDefault())}}),Object.defineProperty(m(e),"handleDragOver",{configurable:!0,enumerable:!0,writable:!0,value:function(t){t.preventDefault(),clearTimeout(e.timeout),e.setState({fileIncoming:!0})}}),Object.defineProperty(m(e),"handleDragLeave",{configurable:!0,enumerable:!0,writable:!0,value:function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.setState({fileIncoming:!1})},100)}}),Object.defineProperty(m(e),"focusInput",{configurable:!0,enumerable:!0,writable:!0,value:function(){return e.fileEl&&e.fileEl.click()}}),e.state={fileIncoming:!1},e.className=Object(i.css)(h),e}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,(a=[{key:"render",value:function(){var e=this,t=this.state.fileIncoming,n=this.props,r=n.style,a=n.message;return a=a||"Drag and drop file or click below to select",o.a.createElement("div",f({style:r},{className:this.className,onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave}),t?o.a.createElement("div",{className:"eatAnim"},o.a.createElement("div",{className:"half"},o.a.createElement("div",null,o.a.createElement("i",null))),o.a.createElement("div",{className:"half"},o.a.createElement("div",null))):o.a.createElement("div",{className:"select"},o.a.createElement("p",null,t?"incoming!!!!":a),o.a.createElement("input",{type:"file",onChange:this.handleChange,ref:function(t){return e.fileEl=t}}),o.a.createElement("button",{onClick:this.focusInput},"Select file")))}}])&&p(n.prototype,a),u&&p(n,u),t}();t.a=y},505:function(e,t,n){e.exports=n(506)},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=n.n(r),a=n(0),i=n.n(a),l=n(6),c=n(4),u=(n.n(c),n(1)),s=n(18),d=n(81),f=n(177),p=n(82),m=n(33),b=n(37);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}var n,r,l,b,g;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),n=t,r=[{key:"render",value:function(){var e=this.props,t=e.editMode,n=e.pages,r=e.users,o=(n[n.curPage]||{}).mods,a=r.curUser,l=(r[a]||{}).isAdmin,u=Boolean(l||Array.isArray(o)&&o.some(function(e){return e.user===a})),b={canEdit:u};return i.a.createElement(s.a,{restrict:!0},t?i.a.createElement(p.a,h({},b,{curPage:c.newsPageId})):i.a.createElement("div",null,i.a.createElement(f.a,b),u&&i.a.createElement(d.a,null),i.a.createElement(m.a,{page:c.newsPageId})))}}],l=[{key:"getInitialProps",value:(b=o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,e.next=3,Object(u._89)(c.newsPageId);case 3:if(r=!0,void 0!==n.edit){e.next=8;break}return r=!1,e.next=8,Object(u._51)({initial:!0});case 8:return e.abrupt("return",{editMode:r});case 9:case"end":return e.stop()}},e,this)}),g=function(){var e=this,t=arguments;return new Promise(function(n,r){var o=b.apply(e,t);function a(e,t){try{var a=o[e](t),c=a.value}catch(e){return void r(e)}a.done?n(c):Promise.resolve(c).then(i,l)}function i(e){a("next",e)}function l(e){a("throw",e)}i()})},function(e){return g.apply(this,arguments)})}],r&&y(n.prototype,r),l&&y(n,l),t}();t.default=Object(b.a)(Object(l.b)(function(e){return{pages:e.pages,users:e.users}})(w),function(e){return{query:e.query}})},81:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(6),i=n(2),l=(n.n(i),n(3)),c=n(7),u=n(1),s=n(4),d=(n.n(s),n(25));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={width:"100%",textAlign:"center",padding:"30px 10px 10px","& .error":{padding:"0 0 15px"},"& .box":g({width:"100%"},l.shadows.box,{margin:"auto",borderRadius:3},l.flexRowCenter,{background:"#ffffff",maxWidth:l.sizes.maxBlockWidth}),"& .preview":{width:"100%",textAlign:"left",padding:"0 10px","& img":{maxHeight:125,maxWidth:"50%"}},"& textarea":{outline:0,height:36,flexGrow:1,border:"none",overflow:"hidden",background:"none",padding:"10px 8px",transition:"height 150ms ease-in-out","::placeholder":{opacity:1}},"& input":{display:"none"},"& .buttons":g({},l.flexRowCenter,{"& button":{margin:"5px 4px 5px auto",":nth-child(1)":{display:"none",marginLeft:4},"&:disabled":{"&:hover, &:active":g({},l.shadows.box)}}}),"& .box.expanded":{flexWrap:"wrap","& textarea":{height:72,width:"100%",overflow:"auto"},"& .buttons":{width:"100%","& p":{marginLeft:5,"& span":{fontWeight:700},"& svg":{marginLeft:5,cursor:"pointer"}},"& button":{":nth-child(1)":{display:"block"}}}}},v=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return m(r,(n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Object.defineProperty(b(r),"state",{configurable:!0,enumerable:!0,writable:!0,value:{text:"",file:null,hasImg:!1,preview:null,pending:!1,expanded:!1}}),Object.defineProperty(b(r),"handleText",{configurable:!0,enumerable:!0,writable:!0,value:function(e){return r.setState({text:e.target.value})}}),Object.defineProperty(b(r),"handleFile",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.target.files,n=t.length?t[0]:null;r.doFileCheck(n)}}),Object.defineProperty(b(r),"doFileCheck",{configurable:!0,enumerable:!0,writable:!0,value:function(e){if(r.setState({file:null,preview:null}),e){var t=Object(d.a)({file:e,previewCb:r.previewCb});if(t.error)return r.fileEl.value=null,Object(u._88)({title:"Error...",button1Txt:"OK",button2Txt:null,message:t.error})}r.setState({file:e})}}),Object.defineProperty(b(r),"previewCb",{configurable:!0,enumerable:!0,writable:!0,value:function(e){r.setState({preview:e})}}),Object.defineProperty(b(r),"expand",{configurable:!0,enumerable:!0,writable:!0,value:function(){clearTimeout(r.timeout),r.timeout=null,r.setState({expanded:!0})}}),Object.defineProperty(b(r),"stopShrink",{configurable:!0,enumerable:!0,writable:!0,value:function(e){"BUTTON"===e.target.tagName&&(r.timeout=setTimeout(function(){return r.timeout=null},50))}}),Object.defineProperty(b(r),"shrink",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.state,t=e.file,n=e.text;if(t||n||r.timeout)return clearTimeout(r.timeout),void(r.timeout=null);r.setState({expanded:!1})}}),Object.defineProperty(b(r),"addFile",{configurable:!0,enumerable:!0,writable:!0,value:function(){return r.fileEl.click()}}),Object.defineProperty(b(r),"removeFile",{configurable:!0,enumerable:!0,writable:!0,value:function(){r.fileEl.value=null,r.setState({file:null,preview:null}),setTimeout(function(){return r.shrink()},1)}}),Object.defineProperty(b(r),"submit",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=r.state,t=e.text,n=e.file;Object(u._37)({text:t,file:n})}}),Object.defineProperty(b(r),"handleDragOver",{configurable:!0,enumerable:!0,writable:!0,value:function(e){r.expand(),e.preventDefault(),clearTimeout(r.timeout),r.timeout=null}}),Object.defineProperty(b(r),"handleDragLeave",{configurable:!0,enumerable:!0,writable:!0,value:function(){clearTimeout(r.timeout),r.timeout=setTimeout(function(){r.timeout=null,r.shrink()},100)}}),Object.defineProperty(b(r),"handleDrop",{configurable:!0,enumerable:!0,writable:!0,value:function(e){var t=e.dataTransfer.files;t.length&&(r.doFileCheck(t[0]),e.preventDefault())}}),n))}var n,a,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.post,r=n.pending,o=n.error;return!t.pending||r||o?t.pending!==r?{pending:r}:null:{text:"",file:null,preview:null,expanded:!1,pending:r}}}],(a=[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.users,a=n.post,l=this.state,u=l.expanded,d=l.file,f=l.text,p=l.preview;return d&&(e=d.name).length>16&&(e=e.substr(0,13)+"..."),o.a.createElement("div",{className:Object(i.css)(y)},a.error&&o.a.createElement("p",{className:"error"},a.error),r[r.curUser].restricts.posting?o.a.createElement("p",null,"Posting is disabled for your account"):o.a.createElement("div",{onDrop:t.handleDrop,onMouseDown:t.stopShrink,onDragOver:t.handleDragOver,onDragLeave:t.handleDragLeave,className:"box"+(u?" expanded":"")},o.a.createElement("textarea",{value:f,id:"PostBox",maxLength:s.maxPostText,placeholder:"What would you like to post?",onBlur:t.shrink,onFocus:t.expand,onChange:t.handleText}),o.a.createElement("input",{type:"file",onChange:t.handleFile,ref:function(e){return t.fileEl=e}}),p&&o.a.createElement("div",{className:"preview"},o.a.createElement("img",{src:p,alt:"attachment preview"})),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:t.addFile,title:"Drag and drop or click to attach file"},"Attach file"),e&&o.a.createElement("p",null,o.a.createElement("span",null,"File: "),e,o.a.createElement(c.a,{icon:"trash",style:{height:16},onClick:t.removeFile})),a.pending?o.a.createElement("button",{disabled:!0},a.progress+"%"):o.a.createElement("button",{onClick:t.submit},"Submit"))))}}])&&p(n.prototype,a),l&&p(n,l),t}();t.a=Object(a.b)(function(e){return{users:e.users,post:e.post}})(v)},82:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(2),i=n(6),l=n(1),c=n(24),u=n.n(c),s=n(13),d=n(22),f=n(7),p=function(e){var t=e.mods,n=e.users,r=e.newMod,a=e.addMod,i=e.modError,l=e.handleMod,c=e.removeMod,u=e.modPending;return o.a.createElement("div",{className:"mods"},o.a.createElement("div",{className:"wrap"},o.a.createElement("h5",null,"Page moderators"),o.a.createElement("p",{className:"note"},"Note: moderators are allowed to edit the page's name, desc, and thumbnail and post on the page."),o.a.createElement("div",{className:"items"},(!t||!t.length)&&o.a.createElement("p",{className:"none"},"No moderators have been added yet"),t&&t.map(function(e){var t=e._id,r=e.user,a=n[r]||{},i=a.avatar,l=a.firstName,u=a.lastName,s=a.username;return o.a.createElement("div",{key:t},o.a.createElement(d.a,{avatar:i,style:{height:30,width:30}}),o.a.createElement("p",null,"".concat(l," ").concat(u," - @").concat(s)),o.a.createElement(f.a,{id:t,"data-user":r,icon:"trash",style:{height:18},onClick:c}))})),o.a.createElement("div",{className:"addMod"},o.a.createElement("label",{htmlFor:"modUser"},"New moderator: "),o.a.createElement("input",{type:"text",id:"modUser",value:r,onChange:l,placeholder:"New mod's username"}),o.a.createElement("button",{onClick:u?null:a},u?o.a.createElement(s.a,{size:18,alt:!0}):"Submit"),i&&o.a.createElement("p",null,i))))},m=n(59),b=n(3);function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={padding:10,"& .denied":{padding:10,textAlign:"center"},"& .wrapDel":{textAlign:"right",paddingTop:5},"& .fields, & .mods":{width:"100%",margin:"15px auto",maxWidth:b.sizes.maxBlockWidth+130},"& .fields":g({margin:"30px auto"},b.flexRowCenter,{flexWrap:"wrap","& img":{margin:"15px 30px 0 0",alignSelf:"flex-start"},"& .field":g({width:"100%",marginTop:15},b.flexRowCenter,{alignItems:"flex-start","& label":{margin:"5px 5px 0 0"},"& input, & textarea":{padding:5,flexGrow:1,minWidth:175,maxWidth:275,border:"none",background:"transparent",transition:"border-color 150ms ease",borderBottom:"1px solid ".concat(b.colors.blackFg)},"&.btns":g({},b.flexRowCenter,{"& button":{":nth-child(1)":{margin:"0 10px 0 auto"}}})})}),"& .mods":{"& .wrap":{maxWidth:b.sizes.maxBlockWidth},"& .note":{fontSize:14,marginTop:2,maxWidth:"80%"},"& .items":{margin:"15px 0","& .none":{textAlign:"center"},"& div":g({width:"100%"},b.flexRowCenter,{alignItems:"flex-start","& p":{flexGrow:1,padding:"2px 0 0 5px"},"& svg":{cursor:"pointer"}})},"& .addMod":g({},b.flexRowCenter,{flexWrap:"wrap","& label":{marginRight:5},"& input":{padding:5,flexGrow:1,flexShrink:1,minWidth:175,border:"none",background:"none",borderBottom:"1px solid ".concat(b.colors.blackFg)},"& button":{marginLeft:10},"& p":{marginTop:10}})}},v=n(11),w=n(42);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _=function(e){var t=e.label,n=e.name,r=e.type,a=P(e,["label","name","type"]);return o.a.createElement("div",{className:"field"},t&&o.a.createElement("label",{htmlFor:n},t),o.a.createElement("textarea"===r?"textarea":"input",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}({name:n,id:n,type:"textarea"!==r?r:null},a)))},k={name:"",desc:"",thumb:null},S=function(e){var t=e.curPage,n=e.pages;return"new"!==t&&n[t]?n[t]:k},C=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=(t.__proto__||Object.getPrototypeOf(t)).call(this,e))||"object"!==O(o)&&"function"!=typeof o?j(r):o,D.call(j(n));var i=S(e),l=i.name,c=i.desc,u=i.thumb;return n.state={name:l,desc:c,thumb:u,newMod:"",file:null,changed:{},modError:null,modPending:!1,previewData:null},n.className=Object(a.css)(y),n}var n,i,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),n=t,l=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.curPage,r=e.page,o=e.pages;if(!r.error&&!r.pending&&t.pending){var a=o[n]||{name:"",desc:""};return{name:a.name,desc:a.desc,changed:{},pending:r.pending}}return r.pending!==t.pending?{pending:r.pending}:null}}],(i=[{key:"render",value:function(){var e,t=this.state,n=t.desc,r=t.name,a=t.newMod,i=t.changed,l=t.modError,c=t.modPending,u=t.previewData,s=this.props,d=s.canEdit,b=s.curPage,g=s.page,h=s.pages,y=s.users,v=(y[y.curUser]||{}).isAdmin,O=g.error,x=g.pending,j=g.progress,E=h[b]||{},k=E.mods,S=E.modsOnly,C=E.thumb,D=P(E,["mods","modsOnly","thumb"]),N="new"===b,A=Object.keys(i).length;return b===h.curPage||N?d||N?(e=u?o.a.createElement(m.a,{src:u}):N?o.a.createElement(f.a,{icon:"file",style:{height:86,width:96,marginRight:25}}):o.a.createElement(m.a,{_id:h.curPage,thumb:C}),o.a.createElement("div",{className:this.className},v&&!D.default&&!N&&o.a.createElement("div",{className:"wrapDel"},o.a.createElement("button",{id:"delete",onClick:this.delete},"Delete page")),o.a.createElement("div",{className:"fields"},e,o.a.createElement(w.a,{style:{margin:"10px 0"},onFileChange:this.handleFileChange,checkFileParams:{imageOnly:!0,previewCb:this.previewThumb},message:"Drag and drop picture or click below to select page thumbnail"}),o.a.createElement(_,{name:"name",value:r,label:"Page name:",onChange:this.handleField,placeholder:"A name for the page"}),o.a.createElement(_,{name:"desc",value:n,type:"textarea",label:"Page description:",onChange:this.handleField,placeholder:"A description of the page"}),Boolean(N&&i.thumb&&i.name||!N&&A)&&o.a.createElement("div",{className:"field btns"},o.a.createElement("button",{onClick:this.reset,className:"btn-alt"},"Reset"),o.a.createElement("button",{onClick:x?null:this.submit},x?"".concat(j,"%"):"Submit")),O&&o.a.createElement("p",{className:"error"},O)),!N&&S&&v&&o.a.createElement(p,{mods:k,users:y,newMod:a,modError:l,modPending:c,addMod:this.addMod,handleMod:this.handleMod,removeMod:this.removeMod}))):o.a.createElement("div",{className:this.className},o.a.createElement("p",{className:"denied"},"You are not allowed to edit this page")):null}}])&&x(n.prototype,i),l&&x(n,l),t}(),D=function(){var e=this;Object.defineProperty(this,"handleFileChange",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n={changed:e.state.changed,file:t};t?n.changed.thumb=!0:(delete n.changed.thumb,n.previewData=null),e.setState(n)}}),Object.defineProperty(this,"handleField",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n,r=e.state.changed,o=t.target,a=o.name,i=o.value;i!==S(e.props)[a]?r[a]=!0:delete r[a],e.setState((E(n={},a,i),E(n,"changed",r),n))}}),Object.defineProperty(this,"reset",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=S(e.props),n=t.name,r=t.desc;e.setState({name:n,desc:r,file:null,changed:{},previewData:null})}}),Object.defineProperty(this,"submit",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.props.curPage,n=e.state,r=n.changed,o=n.file,a=n.name,i="new"===t;if(!i||a&&o){var c={},s=Object.keys(r);s.length&&(s.forEach(function(t){return c[t]=e.state[t]}),r.thumb&&(c.thumb=o,delete c.file),i||(c._id=t),Object(l._88)({message:"Are you sure you would like to ".concat(i?"create":"update"," this page?"),button1Act:function(){Object(l._93)(c).then(function(e){return u.a.push("/page?id="+e)})}}))}}}),Object.defineProperty(this,"previewThumb",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setState({previewData:t})}}),Object.defineProperty(this,"handleMod",{configurable:!0,enumerable:!0,writable:!0,value:function(t){e.setState({newMod:t.target.value})}}),Object.defineProperty(this,"addMod",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.state,n=t.newMod;t.modPending||(n=n.trim())&&Object(l._88)({message:"Are you sure you want to make ".concat(n," a moderator on this page?"),button1Act:function(){e.setState({modPending:!0,modError:null}),Object(l._34)(n).then(function(){e.setState({modPending:!1,newMod:""})}).catch(function(t){e.unmounted||e.setState({modPending:!1,modError:Object(v.a)(t,"An error occurred adding the mod")})})}})}}),Object.defineProperty(this,"removeMod",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var n=t.currentTarget,r=e.props.users,o=n.id,a=r[n.getAttribute("data-user")].username;Object(l._88)({message:"Are you sure you want to remove ".concat(a," as a moderator?"),button1Act:function(){Object(l._78)(o).catch(function(e){Object(l._88)({title:"Error...",message:Object(v.a)(e,"An error occurred removing the moderator"),button1Txt:"OK",button2Txt:null})})}})}}),Object.defineProperty(this,"delete",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=e.props.curPage;Object(l._88)({message:"Are you sure you want to delete this page? This will delete all posts too and is permanent.",button1Act:function(){Object(l._81)(t).then(function(){return u.a.push("/page")}).catch(function(e){Object(l._88)({title:"Error...",message:Object(v.a)(e,"An error occurred removing the page"),button1Txt:"OK",button2Txt:null})})}})}}),Object.defineProperty(this,"componentWillUnmount",{configurable:!0,enumerable:!0,writable:!0,value:function(){return e.unmounted=!0}})};t.a=Object(i.b)(function(e){return{page:e.page,pages:e.pages,users:e.users}})(C)}},[505]).default}});